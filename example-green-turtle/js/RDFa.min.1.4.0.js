/*
 green-turtle version 1.4.0 Copyright (c) 2011-2014, R. Alexander Milowski <alex@milowski.com> All rights reserved. */
if("undefined"==typeof GreenTurtle)var GreenTurtle=function(){function C(){}function n(a){this.target=a?a:{graph:{subjects:{},prefixes:{},terms:{}}};this.theOne="_:"+(new Date).getTime();this.vocabulary=this.language=null;this.blankCounter=0;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}];this.inXHTMLMode=!1;this.absURIRE=/[\w\_\-]+:\S+/;this.finishedHandlers=[];this.init()}function H(){var a=this;this.curieParser={trim:function(a){return a.replace(/^\s\s*/,
"").replace(/\s\s*$/,"")},parse:function(b,c){b=this.trim(b);"["==b.charAt(0)&&"]"==b.charAt(b.length-1)&&(b=b.substring(1,b.length-1));var d=b.indexOf(":");if(0<=d){var e=b.substring(0,d);if(""==e)return(e=a.prefixes[""])?e+b.substring(d+1):null;if("_"==e)return"_:"+b.substring(d+1);if(t.NCNAME.test(e)&&(e=a.prefixes[e]))return e+b.substring(d+1)}return c?a.baseURI.resolve(b):b}};this.base=null;this.toString=function(a){var c=a&&a.shorten?{graph:this,shorten:!0,prefixesUsed:{}}:null;a&&a.blankNodePrefix&&
(c.filterBlankNode=function(c){return"_:"+a.blankNodePrefix+c.substring(2)});if(a&&a.numericalBlankNodePrefix){var d=/^[0-9]+$/;c.filterBlankNode=function(c){var e=c.substring(2);return d.test(e)?"_:"+a.numericalBlankNodePrefix+e:c}}s="";for(var e in this.subjects)s+=this.subjects[e].toString(c),s+="\n";e=a&&a.baseURI?"@base <"+baseURI+"> .\n":"";if(c&&c.shorten)for(var f in c.prefixesUsed)e+="@prefix "+f+": <"+this.prefixes[f]+"> .\n";return 0==e.length?s:e+"\n"+s};this.blankNodeCounter=0;this.clear=
function(){this.subjects={};this.prefixes={};this.terms={};this.blankNodeCounter=0};this.clear();this.prefixes[""]="http://www.w3.org/1999/xhtml/vocab#";this.prefixes.grddl="http://www.w3.org/2003/g/data-view#";this.prefixes.ma="http://www.w3.org/ns/ma-ont#";this.prefixes.owl="http://www.w3.org/2002/07/owl#";this.prefixes.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#";this.prefixes.rdfa="http://www.w3.org/ns/rdfa#";this.prefixes.rdfs="http://www.w3.org/2000/01/rdf-schema#";this.prefixes.rif="http://www.w3.org/2007/rif#";
this.prefixes.skos="http://www.w3.org/2004/02/skos/core#";this.prefixes.skosxl="http://www.w3.org/2008/05/skos-xl#";this.prefixes.wdr="http://www.w3.org/2007/05/powder#";this.prefixes["void"]="http://rdfs.org/ns/void#";this.prefixes.wdrs="http://www.w3.org/2007/05/powder-s#";this.prefixes.xhv="http://www.w3.org/1999/xhtml/vocab#";this.prefixes.xml="http://www.w3.org/XML/1998/namespace";this.prefixes.xsd="http://www.w3.org/2001/XMLSchema#";this.prefixes.sd="http://www.w3.org/ns/sparql-service-description#";
this.prefixes.org="http://www.w3.org/ns/org#";this.prefixes.gldp="http://www.w3.org/ns/people#";this.prefixes.cnt="http://www.w3.org/2008/content#";this.prefixes.dcat="http://www.w3.org/ns/dcat#";this.prefixes.earl="http://www.w3.org/ns/earl#";this.prefixes.ht="http://www.w3.org/2006/http#";this.prefixes.ptr="http://www.w3.org/2009/pointers#";this.prefixes.cc="http://creativecommons.org/ns#";this.prefixes.ctag="http://commontag.org/ns#";this.prefixes.dc="http://purl.org/dc/terms/";this.prefixes.dcterms=
"http://purl.org/dc/terms/";this.prefixes.foaf="http://xmlns.com/foaf/0.1/";this.prefixes.gr="http://purl.org/goodrelations/v1#";this.prefixes.ical="http://www.w3.org/2002/12/cal/icaltzd#";this.prefixes.og="http://ogp.me/ns#";this.prefixes.rev="http://purl.org/stuff/rev#";this.prefixes.sioc="http://rdfs.org/sioc/ns#";this.prefixes.v="http://rdf.data-vocabulary.org/#";this.prefixes.vcard="http://www.w3.org/2006/vcard/ns#";this.prefixes.schema="http://schema.org/";this.terms.describedby="http://www.w3.org/2007/05/powder-s#describedby";
this.terms.license="http://www.w3.org/1999/xhtml/vocab#license";this.terms.role="http://www.w3.org/1999/xhtml/vocab#role";Object.defineProperty(this,"tripleCount",{enumerable:!0,configurable:!1,get:function(){var a=0,c;for(c in this.subjects){var d=this.subjects[c],e;for(e in d.predicates)a+=d.predicates[e].objects.length}return a}})}function F(a,b){this.graph=a;this.id=this.subject=b;this.predicates={};this.origins=[];this.types=[]}function G(a){this.predicate=this.id=a;this.objects=[]}function A(a){n.call(this,
a)}function T(a){this.query=function(b,c){if(!b)return a.getProjections(c);var d=[],e;for(e in a._data_.graph.subjects){var f=a._data_.graph.subjects[e],h;for(h in b){var l=a._data_.graph.curieParser.parse(h,!0),l=f.predicates[l];if(!l){f=null;break}for(var m=a._data_.graph.curieParser.parse(b[h],!1),g=null,n=0;!g&&n<l.objects.length;n++)l.objects[n].value==m&&(g=l.objects[n]);if(!g){f=null;break}}f&&d.push(t.toProjection(a,f,c))}return d}}function Q(a,b){this._data_={owner:a,subject:b,properties:{}}}
function t(a){this._data_={graph:new H};this._data_.graph.baseURI=this.parseURI(a);this._data_.baseURI=this._data_.graph.baseURI;Object.defineProperty(this,"rdfa",{value:new T(this),writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,"graph",{value:this._data_.graph,writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,"implementation",{value:GreenTurtle.implementation,writable:!1,configurable:!1,enumerable:!0})}function g(){this.reset();this.onError=function(a,
b){console.log(a+": "+b)}}function p(){this.blankCounter=0;this.vocabularies=[{namespaceURI:"http://schema.org/",isMember:function(a){return 0==a.indexOf(this.namespaceURI)},getProperty:function(a){return this.namespaceURI+a}}]}function M(a){p.call(this);this.graph=a}function w(){this.blankCounter=0}function R(a){this.blankCounter=0;this.graph=a}var S={version:"1.4.0"};C.SCHEME=/^[A-Za-z][A-Za-z0-9\+\-\.]*\:/;C.prototype.parseURI=function(a){var b=C.SCHEME.exec(a);if(!b)throw"Bad URI value, no scheme: "+
a;a={spec:a};a.scheme=b[0].substring(0,b[0].length-1);a.schemeSpecificPart=a.spec.substring(b[0].length);"/"==a.schemeSpecificPart.charAt(0)&&"/"==a.schemeSpecificPart.charAt(1)?this.parseGeneric(a):a.isGeneric=!1;a.normalize=function(){if(this.isGeneric&&0!=this.segments.length){if(1<this.path.length&&"/."==this.path.substring(this.path.length-2))this.path=this.path.substring(0,this.path.length-1),this.segments.splice(this.segments.length-1,1);else{var a=this.path.charAt(this.path.length-1);"/"!=
a&&(a="");for(var b=0;b<this.segments.length;b++)0<b&&".."==this.segments[b]&&(this.segments.splice(b-1,2),b-=2),"."==this.segments[b]&&(this.segments.splice(b,1),b--);this.path=0==this.segments.length?"/":"/"+this.segments.join("/")+a}this.schemeSpecificPart="//"+this.authority+this.path;"undefined"!=typeof this.query&&(this.schemeSpecificPart+="?"+this.query);"undefined"!=typeof this.fragment&&(this.schemeSpecificPart+="#"+this.fragment);this.spec=this.scheme+":"+this.schemeSpecificPart}};a.resolve=
function(a){if(!a)return this.spec;if("#"==a.charAt(0)){var b=this.spec.lastIndexOf("#");return 0>b?this.spec+a:this.spec.substring(0,b)+a}if(!this.isGeneric)throw"Cannot resolve uri against non-generic URI: "+this.spec;a.indexOf(":");if("/"==a.charAt(0))return this.scheme+"://"+this.authority+a;if("."==a.charAt(0)&&"/"==a.charAt(1)){if("/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a.substring(2);b=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+
this.path.substring(0,b)+a.substring(1)}if(C.SCHEME.test(a))return a;if("?"==a.charAt(0)||"/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a;b=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,b+1)+a};a.relativeTo=function(a){if(a.scheme!=this.scheme)return this.spec;if(!this.isGeneric)throw"A non generic URI cannot be made relative: "+this.spec;if(!a.isGeneric)throw"Cannot make a relative URI against a non-generic URI: "+
a.spec;if(a.authority!=this.authority)return this.spec;for(var b=0;b<this.segments.length&&b<a.segments.length;b++)if(this.segments[b]!=a.segments[b]){for(var e="/"==a.path.charAt(a.path.length-1)?0:-1,f="",h=b;h<a.segments.length+e;h++)f+="../";for(h=b;h<this.segments.length;h++)f+=this.segments[h],h+1<this.segments.length&&(f+="/");"/"==this.path.charAt(this.path.length-1)&&(f+="/");return f}if(this.segments.length==a.segments.length)return this.hash?this.hash:this.query?this.query:"";if(b<this.segments.length){f=
"";for(h=b;h<this.segments.length;h++)f+=this.segments[h],h+1<this.segments.length&&(f+="/");"/"==this.path.charAt(this.path.length-1)&&(f+="/");return f}throw"Cannot calculate a relative URI for "+this.spec+" against "+a.spec;};return a};C.prototype.parseGeneric=function(a){if("/"!=a.schemeSpecificPart.charAt(0)||"/"!=a.schemeSpecificPart.charAt(1))throw"Generic URI values should start with '//':"+a.spec;var b=a.schemeSpecificPart.substring(2),c=b.indexOf("/");a.authority=0>c?b:b.substring(0,c);
a.path=0>c?"":b.substring(c);b=a.path.indexOf("#");0<=b&&(a.fragment=a.path.substring(b+1),a.path=a.path.substring(0,b));b=a.path.indexOf("?");0<=b&&(a.query=a.path.substring(b+1),a.path=a.path.substring(0,b));if("/"==a.path||""==a.path)a.segments=[];else for(a.segments=a.path.split(/\//),0<a.segments.length&&""==a.segments[0]&&1<a.path.length&&"/"!=a.path.charAt(1)&&a.segments.shift(),0<a.segments.length&&0<a.path.length&&"/"==a.path.charAt(a.path.length-1)&&""==a.segments[a.segments.length-1]&&
1<a.path.length&&"/"!=a.path.charAt(a.path.length-2)&&a.segments.pop(),b=0;b<a.segments.length;b++)for(var c=a.segments[b].split(/%[A-Za-z0-9][A-Za-z0-9]|[\ud800-\udfff][\ud800-\udfff]|[A-Za-z0-9\-\._~!$&'()*+,;=@:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/),d=0;d<c.length;d++)if(0<c[d].length)throw"Unecaped character "+c[d].charAt(0)+" ("+c[d].charCodeAt(0)+") in URI "+a.spec;a.isGeneric=!0};n.prototype=new C;n.prototype.constructor=n;n.prototype.newBlankNode=function(){this.blankCounter++;return"_:"+
this.blankCounter};n.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";n.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";n.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";n.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";n.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";n.nameChar="[-A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\u00b7\u0300-\u036f\u203f-\u2040]";
n.nameStartChar="[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]";
n.NCNAME=new RegExp("^"+n.nameStartChar+n.nameChar+"*$");n.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};n.prototype.tokenize=function(a){return n.trim(a).split(/\s+/)};n.prototype.parseSafeCURIEOrCURIEOrURI=function(a,b,c){a=n.trim(a);return"["==a.charAt(0)&&"]"==a.charAt(a.length-1)?(a=a.substring(1,a.length-1),a=a.trim(a),0==a.length?null:"_:"==a?this.theOne:this.parseCURIE(a,b,c)):this.parseCURIEOrURI(a,b,c)};n.prototype.parseCURIE=function(a,b,c){c=a.indexOf(":");if(0<=
c){var d=a.substring(0,c);if(""==d)return(b=b[""])?b+a.substring(c+1):null;if("_"==d)return"_:"+a.substring(c+1);if(n.NCNAME.test(d)&&(b=b[d]))return b+a.substring(c+1)}return null};n.prototype.parseCURIEOrURI=function(a,b,c){return(b=this.parseCURIE(a,b,c))?b:this.resolveAndNormalize(c,a)};n.prototype.parsePredicate=function(a,b,c,d,e,f){return""==a?null:(a=this.parseTermOrCURIEOrAbsURI(a,b,f?null:c,d,e))&&0==a.indexOf("_:")?null:a};n.prototype.parseTermOrCURIEOrURI=function(a,b,c,d,e){a=n.trim(a);
if((d=this.parseCURIE(a,d,e))||(d=c[a]))return d;d=a.toLowerCase();return(d=c[d])?d:b&&!this.absURIRE.exec(a)?b+a:this.resolveAndNormalize(e,a)};n.prototype.parseTermOrCURIEOrAbsURI=function(a,b,c,d,e){a=n.trim(a);if(d=this.parseCURIE(a,d,e))return d;if(c){if(b&&!this.absURIRE.exec(a))return b+a;if(b=c[a])return b;b=a.toLowerCase();if(b=c[b])return b}return this.absURIRE.exec(a)?this.resolveAndNormalize(e,a):null};n.prototype.resolveAndNormalize=function(a,b){var c=a.resolve(b),c=this.parseURI(c);
c.normalize();return c.spec};n.prototype.parsePrefixMappings=function(a,b){for(var c=this.tokenize(a),d=null,e=0;e<c.length;e++)":"==c[e][c[e].length-1]?d=c[e].substring(0,c[e].length-1):d&&(b[d]=this.target.baseURI?this.target.baseURI.resolve(c[e]):c[e],d=null)};n.prototype.copyMappings=function(a){var b={},c;for(c in a)b[c]=a[c];return b};n.prototype.ancestorPath=function(a){for(var b="";a&&a.nodeType!=Node.DOCUMENT_NODE;)b="/"+a.localName+b,a=a.parentNode;return b};n.prototype.setContext=function(a){"html"==
a.localName&&"XHTML+RDFa 1.1"==a.getAttribute("version")?this.setXHTMLContext():"html"==a.localName||"http://www.w3.org/1999/xhtml"==a.namespaceURI?document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"==document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"==
document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()};n.prototype.setInitialContext=function(){this.vocabulary=null;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]};n.prototype.setXMLContext=function(){this.setInitialContext();this.inHTMLMode=this.inXHTMLMode=!1};n.prototype.setHTMLContext=function(){this.setInitialContext();this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",
localName:"lang"},{namespaceURI:null,localName:"lang"}];this.inXHTMLMode=!1;this.inHTMLMode=!0};n.prototype.setXHTMLContext=function(){this.setInitialContext();this.inXHTMLMode=!0;this.inHTMLMode=!1;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}];this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate";this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix";this.target.graph.terms.bookmark=
"http://www.w3.org/1999/xhtml/vocab#bookmark";this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite";this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter";this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents";this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright";this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first";this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary";
this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help";this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon";this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index";this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last";this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license";this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta";this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next";
this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev";this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous";this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section";this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet";this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection";this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start";this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top";
this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up";this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1";this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related";this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role";this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"};n.prototype.init=function(){};n.prototype.newSubjectOrigin=function(a,b){};n.prototype.addTriple=function(a,b,c,d){};n.dateTimeTypes=
[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,
type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];n.deriveDateTimeType=function(a){for(var b=0;b<
n.dateTimeTypes.length;b++){var c=n.dateTimeTypes[b].pattern.exec(a);if(c&&c[0].length==a.length)return n.dateTimeTypes[b].type}return null};n.prototype.process=function(a,b){a.nodeType==Node.DOCUMENT_NODE?(a=a.documentElement,this.setContext(a)):a.parentNode.nodeType==Node.DOCUMENT_NODE&&this.setContext(a);var c=[],d=function(a){var c=a.indexOf("#");0<=c&&(a=a.substring(0,c));b&&b.baseURIMap&&(a=b.baseURIMap(a));return a};for(c.push({current:a,context:this.push(null,d(a.baseURI))});0<c.length;){var e=
c.shift();if(e.parent){if(!e.context.parent||e.context.parent.listMapping!=e.listMapping)for(var f in e.listMapping){var h=e.listMapping[f];if(0==h.length)this.addTriple(e.parent,e.subject,f,{type:n.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});else{for(var l=[],m=0;m<h.length;m++)l.push(this.newBlankNode());for(m=0;m<l.length;m++)this.addTriple(e.parent,l[m],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",h[m]),this.addTriple(e.parent,l[m],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",
{type:n.objectURI,value:m+1<l.length?l[m+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(e.parent,e.subject,f,{type:n.objectURI,value:l[0]})}}}else{var l=e.current,e=e.context,g=!1,q=null,p=null,r=null,x=e.prefixes,h=!1,t=[],y=e.listMapping,w=e.parent?!1:!0,A=e.language,O=e.vocabulary,z=this.parseURI(d(l.baseURI));l.item=null;if(m=l.getAttributeNode("vocab"))m=n.trim(m.value),0<m.length?(O=m,this.addTriple(l,z.spec,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:n.objectURI,
value:O})):O=this.vocabulary;for(m=0;m<l.attributes.length;m++){var D=l.attributes[m];if("x"==D.nodeName.charAt(0)&&0==D.nodeName.indexOf("xmlns:")){h||(x=this.copyMappings(x),h=!0);var I=D.nodeName.substring(6),D=n.trim(D.value);x[I]=this.target.baseURI?this.target.baseURI.resolve(D):D}}if(m=l.getAttributeNode("prefix"))h||(x=this.copyMappings(x),h=!0),this.parsePrefixMappings(m.value,x);h=null;for(m=0;!h&&m<this.langAttributes.length;m++)h=l.getAttributeNodeNS(this.langAttributes[m].namespaceURI,
this.langAttributes[m].localName);h&&(m=n.trim(h.value),A=0<m.length?m:null);var I=l.getAttributeNode("rel"),D=l.getAttributeNode("rev"),J=l.getAttributeNode("typeof"),C=l.getAttributeNode("property"),G=l.getAttributeNode("datatype"),H=this.inHTMLMode?l.getAttributeNode("datetime"):null,F=l.getAttributeNode("content"),K=l.getAttributeNode("about"),E=l.getAttributeNode("src"),N=l.getAttributeNode("resource"),P=l.getAttributeNode("href"),M=l.getAttributeNode("inlist"),v=[];if(I)for(var L=this.tokenize(I.value),
m=0;m<L.length;m++)(f=this.parsePredicate(L[m],O,e.terms,x,z,this.inHTMLMode&&null!=C))&&v.push(f);var B=[];if(D)for(L=this.tokenize(D.value),m=0;m<L.length;m++)(f=this.parsePredicate(L[m],O,e.terms,x,z,this.inHTMLMode&&null!=C))&&B.push(f);!this.inHTMLMode||null==I&&null==D||null==C||(0==v.length&&(I=null),0==B.length&&(D=null));I||D?(K&&(q=this.parseSafeCURIEOrCURIEOrURI(K.value,x,z)),J&&(r=q),q||(l.parentNode.nodeType==Node.DOCUMENT_NODE?q=d(l.baseURI):e.parentObject&&(q=d(l.parentNode.baseURI)==
e.parentObject?d(l.baseURI):e.parentObject)),N&&(p=this.parseSafeCURIEOrCURIEOrURI(N.value,x,z)),p||(P?p=this.resolveAndNormalize(z,encodeURI(P.value)):E?p=this.resolveAndNormalize(z,encodeURI(E.value)):!J||K||this.inXHTMLMode&&("head"==l.localName||"body"==l.localName)||(p=this.newBlankNode())),!J||K||!this.inXHTMLMode||"head"!=l.localName&&"body"!=l.localName?J&&!K&&(r=p):r=q):!C||F||G?(K&&(q=this.parseSafeCURIEOrCURIEOrURI(K.value,x,z)),!q&&N&&(q=this.parseSafeCURIEOrCURIEOrURI(N.value,x,z)),!q&&
P&&(q=this.resolveAndNormalize(z,encodeURI(P.value))),!q&&E&&(q=this.resolveAndNormalize(z,encodeURI(E.value))),q||(l.parentNode.nodeType==Node.DOCUMENT_NODE?q=d(l.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!=l.localName&&"body"!=l.localName?J?q=this.newBlankNode():e.parentObject&&(q=d(l.parentNode.baseURI)==e.parentObject?d(l.baseURI):e.parentObject,C||(g=!0)):q=d(l.parentNode.baseURI)==e.parentObject?d(l.baseURI):e.parentObject),J&&(r=q)):(K&&(q=this.parseSafeCURIEOrCURIEOrURI(K.value,
x,z),J&&(r=q)),q||l.parentNode.nodeType!=Node.DOCUMENT_NODE?!q&&e.parentObject&&(q=d(l.parentNode.baseURI)==e.parentObject?d(l.baseURI):e.parentObject):(q=d(l.baseURI),J&&(r=q)),J&&!r&&(N&&(r=this.parseSafeCURIEOrCURIEOrURI(N.value,x,z)),!r&&P&&(r=this.resolveAndNormalize(z,encodeURI(P.value))),!r&&E&&(r=this.resolveAndNormalize(z,encodeURI(E.value))),r||!this.inXHTMLMode&&!this.inHTMLMode||"head"!=l.localName&&"body"!=l.localName||(r=q),r||(r=this.newBlankNode()),p=r));q&&(K||N||r)&&(m=q,J&&!K&&
!N&&p&&(m=p),this.newSubjectOrigin(l,m));if(r)for(L=this.tokenize(J.value),m=0;m<L.length;m++)(h=this.parseTermOrCURIEOrAbsURI(L[m],O,e.terms,x,z))&&this.addTriple(l,r,n.typeURI,{type:n.objectURI,value:h});q&&q!=e.parentObject&&(y={},w=!0);if(p){if(I&&M)for(m=0;m<v.length;m++)h=y[v[m]],h||(h=[],y[v[m]]=h),h.push({type:n.objectURI,value:p});else if(I)for(m=0;m<v.length;m++)this.addTriple(l,q,v[m],{type:n.objectURI,value:p});if(D)for(m=0;m<B.length;m++)this.addTriple(l,p,B[m],{type:n.objectURI,value:q})}else{q&&
!p&&(I||D)&&(p=this.newBlankNode());if(I&&M)for(m=0;m<v.length;m++)h=y[v[m]],h||(h=[],y[f]=h),t.push({predicate:v[m],list:h});else if(I)for(m=0;m<v.length;m++)t.push({predicate:v[m],forward:!0});if(D)for(m=0;m<B.length;m++)t.push({predicate:B[m],forward:!1})}if(C)for(B=v=null,G?(v=""==G.value?n.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(G.value,O,e.terms,x,z),B=H&&!F?H.value:v==n.XMLLiteralURI||v==n.HTMLLiteralURI?null:F?F.value:l.textContent):F?(v=n.PlainLiteralURI,B=F.value):H?(B=H.value,v=n.deriveDateTimeType(B),
v||(v=n.PlainLiteralURI)):I||D||(N&&(B=this.parseSafeCURIEOrCURIEOrURI(N.value,x,z)),!B&&P?B=this.resolveAndNormalize(z,encodeURI(P.value)):!B&&E&&(B=this.resolveAndNormalize(z,encodeURI(E.value))),B&&(v=n.objectURI)),v||(J&&!K?(v=n.objectURI,B=r):(B=l.textContent,this.inHTMLMode&&"time"==l.localName&&(v=n.deriveDateTimeType(B)),v||(v=n.PlainLiteralURI))),L=this.tokenize(C.value),m=0;m<L.length;m++)if(f=this.parsePredicate(L[m],O,e.terms,x,z))M?(h=y[f],h||(h=[],y[f]=h),h.push(v==n.XMLLiteralURI||
v==n.HTMLLiteralURI?{type:v,value:l.childNodes}:{type:v?v:n.PlainLiteralURI,value:B,language:A})):v==n.XMLLiteralURI||v==n.HTMLLiteralURI?this.addTriple(l,q,f,{type:v,value:l.childNodes}):this.addTriple(l,q,f,{type:v?v:n.PlainLiteralURI,value:B,language:A});if(q&&!g)for(m=0;m<e.incomplete.length;m++)e.incomplete[m].list?e.incomplete[m].list.push({type:n.objectURI,value:q}):e.incomplete[m].forward?this.addTriple(l,e.subject,e.incomplete[m].predicate,{type:n.objectURI,value:q}):this.addTriple(l,q,e.incomplete[m].predicate,
{type:n.objectURI,value:e.subject});r=null;z=q;g?(r=this.push(e,e.subject),r.parentObject=d(l.parentNode.baseURI)==e.parentObject?d(l.baseURI):e.parentObject,r.incomplete=e.incomplete,r.language=A,r.prefixes=x):(r=this.push(e,q),r.parentObject=p?p:q?q:e.subject,r.prefixes=x,r.incomplete=t,p&&(z=p,y={},w=!0),r.listMapping=y,r.language=A);r.vocabulary=O;w&&c.unshift({parent:l,context:e,subject:z,listMapping:y});for(l=l.lastChild;l;l=l.previousSibling)l.nodeType==Node.ELEMENT_NODE&&c.unshift({current:l,
context:r})}}this.inHTMLMode&&this.copyProperties();for(m=0;m<this.finishedHandlers.length;m++)this.finishedHandlers[m](a)};n.prototype.copyProperties=function(){};n.prototype.push=function(a,b){return{parent:a,subject:b?b:a?a.subject:null,parentObject:null,incomplete:[],listMapping:a?a.listMapping:{},language:a?a.language:this.language,prefixes:a?a.prefixes:this.target.graph.prefixes,terms:a?a.terms:this.target.graph.terms,vocabulary:a?a.vocabulary:this.vocabulary}};H.prototype.newBlankNode=function(){this.blankNodeCounter++;
return"_:"+this.blankNodeCounter};H.prototype.expand=function(a){return this.curieParser.parse(a,!0)};H.prototype.shorten=function(a,b){for(prefix in this.prefixes){var c=this.prefixes[prefix];if(0==a.indexOf(c))return b&&(b[prefix]=c),prefix+":"+a.substring(c.length)}return null};H.prototype.add=function(a,b,c,d){if(a&&b&&c){a=this.expand(a);b=this.expand(b);var e=this.subjects[a];e||(e=new F(this,a),this.subjects[a]=e);d&&d.origin&&e.origins.push(d.origin);"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"==
b&&e.types.push(c);a=e.predicates[b];a||(a=new G(b),e.predicates[b]=a);"string"==typeof c?a.objects.push({type:n.PlainLiteralURI,value:c}):a.objects.push({type:c.type?this.expand(c.type):n.PlainLiteralURI,value:c.value?c.value:"",origin:c.origin,language:c.language})}};H.prototype.addCollection=function(a,b,c,d){if(a&&b&&c){for(var e=0;e<c.length;e++){var f={type:d&&d.type?d.type:"rdf:PlainLiteral"};d&&d.language&&(f.language=d.language);d&&d.datatype&&(f.datatype=d.datatype);"object"==typeof c[e]?
(f.value=c[e].value?c[e].value:"",c[e].type&&(f.type=c[e].type),c[e].language&&(f.language=c[e].language),c[e].datatype&&(f.datatype=c[e].datatype)):f.value=c[e];var h=this.newBlankNode();this.add(a,b,{type:"rdf:object",value:h});this.add(h,"rdf:first",f);a=h;b="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"}this.add(a,b,{type:"rdf:object",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}};H.prototype.remove=function(a,b){if(a){a=this.expand(a);var c=this.subjects[c];c&&(b?(b=this.expand(b),
delete c.predicates[b]):delete this.subjects[a])}else this.subjects={}};F.prototype.toString=function(a){var b=null;"_:"==this.subject.substring(0,2)?b=a&&a.filterBlankNode?a.filterBlankNode(this.subject):this.subject:a&&a.shorten?(b=this.graph.shorten(this.subject,a.prefixesUsed))||(b="<"+this.subject+">"):b="<"+this.subject+">";var c=!0,d;for(d in this.predicates)c?c=!1:b+=";\n",b+=" "+this.predicates[d].toString(a);return b+" ."};F.prototype.toObject=function(){var a={subject:this.subject,predicates:{}},
b;for(b in this.predicates){var c=this.predicates[b],d={predicate:b,objects:[]};a.predicates[b]=d;for(var e=0;e<c.objects.length;e++){var f=c.objects[e];if(f.type==n.XMLLiteralURI){for(var h=new XMLSerializer,l="",m=0;m<f.value.length;m++)f.value[m].nodeType==Node.ELEMENT_NODE?l+=h.serializeToString(f.value[m]):f.value[m].nodeType==Node.TEXT_NODE&&(l+=f.value[m].nodeValue);d.objects.push({type:f.type,value:l,language:f.language})}else f.type==n.HTMLLiteralURI?(l=0==f.value.length?"":f.value[0].parentNode.innerHTML,
d.objects.push({type:f.type,value:l,language:f.language})):d.objects.push({type:f.type,value:f.value,language:f.language})}}return a};F.prototype.getValues=function(){for(var a=[],b=0;b<arguments.length;b++){var c=this.graph.curieParser.parse(arguments[b],!0);if(c=this.predicates[c])for(var d=0;d<c.objects.length;d++)a.push(c.objects[d].value)}return a};G.getPrefixMap=function(a){for(var b={};a.attributes;){for(var c=0;c<a.attributes.length;c++)if("http://www.w3.org/2000/xmlns/"==a.attributes[c].namespaceURI){var d=
a.attributes[c].localName;"xmlns"==a.attributes[c].localName&&(d="");d in b||(b[d]=a.attributes[c].nodeValue)}a=a.parentNode}return b};G.prototype.toString=function(a){var b=null;a&&a.shorten&&a.graph?(b=a.graph.shorten(this.predicate,a.prefixesUsed))||(b="<"+this.predicate+">"):b="<"+this.predicate+">";for(var b=b+" ",c=0;c<this.objects.length;c++)if(0<c&&(b+=", "),"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"==this.objects[c].type)"_:"==this.objects[c].value.substring(0,2)?b=a&&a.filterBlankNode?
b+a.filterBlankNode(this.objects[c].value):b+this.objects[c].value:a&&a.shorten&&a.graph?b=(u=a.graph.shorten(this.objects[c].value,a.prefixesUsed))?b+u:b+("<"+this.objects[c].value+">"):b+="<"+this.objects[c].value+">";else if("http://www.w3.org/2001/XMLSchema#integer"==this.objects[c].type||"http://www.w3.org/2001/XMLSchema#decimal"==this.objects[c].type||"http://www.w3.org/2001/XMLSchema#double"==this.objects[c].type||"http://www.w3.org/2001/XMLSchema#boolean"==this.objects[c].type)b+=this.objects[c].value;
else if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"==this.objects[c].type){for(var d=new XMLSerializer,e="",f=0;f<this.objects[c].value.length;f++)if(this.objects[c].value[f].nodeType==Node.ELEMENT_NODE){var h=G.getPrefixMap(this.objects[c].value[f]),l=[],m;for(m in h)l.push(m);l.sort();for(var g=this.objects[c].value[f].cloneNode(!0),n=0;n<l.length;n++)g.setAttributeNS("http://www.w3.org/2000/xmlns/",0==l[n].length?"xmlns":"xmlns:"+l[n],h[l[n]]);e+=d.serializeToString(g)}else this.objects[c].value[f].nodeType==
Node.TEXT_NODE&&(e+=this.objects[c].value[f].nodeValue);b+='"""'+e.replace(/"""/g,'\\"\\"\\"')+'"""^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>'}else"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML"==this.objects[c].type?b=0==this.objects[c].value.length?b+'""""""^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML>':b+('"""'+this.objects[c].value[0].parentNode.innerHTML.replace(/"""/g,'\\"\\"\\"')+'"""^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML>'):(d=this.objects[c].value.toString(),
b=0<=d.indexOf("\n")||0<=d.indexOf("\r")?b+('"""'+d.replace(/"""/g,'\\"\\"\\"')+'"""'):b+('"'+d.replace(/"/g,'\\"')+'"'),"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"!=this.objects[c].type?b+="^^<"+this.objects[c].type+">":this.objects[c].language&&(b+="@"+this.objects[c].language));return b};A.prototype=new n;A.prototype.constructor=n;A.prototype.getObjectSize=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};A.prototype.init=function(){var a=this;this.finishedHandlers.push(function(b){for(var c in a.target.graph.subjects)0==
a.getObjectSize(a.target.graph.subjects[c].predicates)&&delete a.target.graph.subjects[c]})};A.prototype.newBlankNode=function(){return this.target.graph.newBlankNode()};A.prototype.newSubjectOrigin=function(a,b){for(var c=this.newSubject(null,b),d=0;d<c.origins.length;d++)if(c.origins[d]===a)return;c.origins.push(a);a.data||Object.defineProperty(a,"data",{value:c,writable:!1,configurable:!0,enumerable:!0})};A.prototype.newSubject=function(a,b){var c=this.target.graph.subjects[b];c||(c=new F(this.target.graph,
b),this.target.graph.subjects[b]=c);return c};A.prototype.addTriple=function(a,b,c,d){var e=this.newSubject(a,b);b=e.predicates[c];b||(b=new G(c),e.predicates[c]=b);for(var f=0;f<b.objects.length;f++)if(b.objects[f].type==d.type&&b.objects[f].value==d.value){b.objects[f].origin!==a&&(Array.isArray(b.objects[f].origin)||(c=[],c.push(b.objects[f].origin),b.objects[f].origin=c),b.objects[f].origin.push(a));return}b.objects.push(d);d.origin=a;c==n.typeURI&&e.types.push(d.value)};A.rdfaCopyPredicate="http://www.w3.org/ns/rdfa#copy";
A.rdfaPatternType="http://www.w3.org/ns/rdfa#Pattern";A.prototype.copyProperties=function(){var a=[],b={},c;for(c in this.target.graph.subjects){var d=this.target.graph.subjects[c],e=d.predicates[A.rdfaCopyPredicate];if(e){a.push(c);for(var f=0;f<e.objects.length;f++)if(e.objects[f].type==n.objectURI){var h=e.objects[f].value,l=this.target.graph.subjects[h];if(l){var m=l.predicates[n.typeURI];if(m){for(var g=!1,q=0;q<m.objects.length&&!g;q++)m.objects[q].value==A.rdfaPatternType&&m.objects[q].type==
n.objectURI&&(g=!0);if(g){b[h]=!0;for(var p in l.predicates)if(h=l.predicates[p],p==n.typeURI){if(1!=h.objects.length)for(q=0;q<h.objects.length;q++)h.objects[q].value!=A.rdfaPatternType&&(m=d.predicates[p],m||(m=new G(p),d.predicates[p]=m),m.objects.push({type:h.objects[q].type,value:h.objects[q].value,language:h.objects[q].language,origin:h.objects[q].origin}),d.types.push(h.objects[q].value))}else for(m=d.predicates[p],m||(m=new G(p),d.predicates[p]=m),q=0;q<h.objects.length;q++)m.objects.push({type:h.objects[q].type,
value:h.objects[q].value,language:h.objects[q].language,origin:h.objects[q].origin})}}}}}}for(f=0;f<a.length;f++)d=this.target.graph.subjects[a[f]],delete d.predicates[A.rdfaCopyPredicate];for(c in b)delete this.target.graph.subjects[c]};Q.prototype.getProperties=function(){var a=[],b;for(b in this._data_.properties)a.push(b);return a};Q.prototype.getSubject=function(){return this._data_.subject};Q.prototype.get=function(a){a=this._data_.owner._data_.graph.curieParser.parse(a,!0);return(a=this._data_.properties[a])?
a[0]:null};Q.prototype.getAll=function(a){a=this._data_.owner._data_.graph.curieParser.parse(a,!0);return this._data_.properties[a]};t.prototype=new C;t.prototype.constructor=t;t.nameChar="[-A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\u00b7\u0300-\u036f\u203f-\u2040]";t.nameStartChar="[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]";
t.NCNAME=new RegExp("^"+n.nameStartChar+n.nameChar+"*$");t.toProjection=function(a,b,c){var d=new Q(a,b.subject),e;for(e in b.predicates){var f=b.predicates[e],h=[];d._data_.properties[e]=h;for(var l=0;l<f.objects.length;l++)h.push(f.objects[l].value)}if(c)for(var m in c)e=c[m],e=a._data_.graph.curieParser.parse(e,!0),(h=d._data_.properties[e])&&(d[m]=1==h.length?h[0]:h);return d};t.prototype.getProperties=function(a){var b=[];if(a){if(a=this._data_.graph.curieParser.parse(a,!0),e=this._data_.graph.subjects[a])for(var c in e.predicates)b.push(c)}else{a=
{};for(var d in this._data_.graph.subjects){var e=this._data_.graph.subjects[d];if(e)for(c in e.predicates)a[c]||(a[c]=!0,b.push(c))}}return b};t.prototype.getSubjects=function(a,b){var c=[];a&&(a=this._data_.graph.curieParser.parse(a,!0));if(a&&b){var d=this._data_.graph.curieParser.parse(b,!0),e;for(e in this._data_.graph.subjects){var f=this._data_.graph.subjects[e];if(f=f.predicates[a])for(var h=0;h<f.objects.length;h++)if(f.objects[h].value==b||f.objects[h].value==d){c.push(e);break}}}else if(a)for(e in this._data_.graph.subjects)f=
this._data_.graph.subjects[e],(f=f.predicates[a])&&c.push(e);else if(b)for(e in d=this._data_.graph.curieParser.parse(b,!0),this._data_.graph.subjects){var f=this._data_.graph.subjects[e],l;for(l in f.predicates)if(f=e.predicates[l]){for(var m=null,h=0;!m&&h<f.objects.length;h++)if(f.objects[h].value==b||node.objects[h].value==d)m=f.objects[h];if(m){c.push(e);break}}}else for(e in this._data_.graph.subjects)c.push(e);return c};t.prototype.getValueOrigins=function(a,b){var c=[],d=function(a){if(a)for(var b=
0;b<a.objects.length;b++)if(Array.isArray(a.objects[b].origin))for(var d=0;d<a.objects[b].origin.length;d++)c.push({origin:a.objects[b].origin[d],value:a.objects[b].value});else c.push({origin:a.objects[b].origin,value:a.objects[b].value})};b&&(b=this._data_.graph.curieParser.parse(b,!0));if(a){a=this._data_.graph.curieParser.parse(a,!0);var e=this._data_.graph.subjects[a];if(e)if(b)d(e.predicates[b]);else for(var f in e.predicates)d(e.predicates[f])}else if(b)for(var h in this._data_.graph.subjects)e=
this._data_.graph.subjects[h],d(e.predicates[b]);else for(h in this._data_.graph.subjects)for(f in e=this._data_.graph.subjects[h],e.predicates)d(e.predicates[f]);return c};t.prototype.getValues=function(a,b){var c=[];b&&(b=this._data_.graph.curieParser.parse(b,!0));if(a){a=this._data_.graph.curieParser.parse(a,!0);var d=this._data_.graph.subjects[a];if(d)if(b){var e=d.predicates[b];if(e)for(var f=0;f<e.objects.length;f++)c.push(e.objects[f].value)}else for(var h in d.predicates)for(e=d.predicates[h],
f=0;f<e.objects.length;f++)c.push(e.objects[f].value)}else if(b)for(var l in this._data_.graph.subjects){if(d=this._data_.graph.subjects[l],e=d.predicates[b])for(f=0;f<e.objects.length;f++)c.push(e.objects[f].value)}else for(l in this._data_.graph.subjects)for(h in d=this._data_.graph.subjects[l],d.predicates)for(e=d.predicates[h],f=0;f<e.objects.length;f++)c.push(e.objects[f].value);return c};Object.defineProperty(t.prototype,"prefixes",{enumerable:!0,get:function(){return Object.keys(this._data_.graph.prefixes)}});
t.prototype.setMapping=function(a,b){this._data_.graph.prefixes[a]=b};t.prototype.getMapping=function(a){return this._data_.graph.prefixes[a]};t.prototype.expand=function(a){return this._data_.graph.expand(a)};t.prototype.shorten=function(a){return this._data_.graph.shorten(a)};t.prototype.getSubject=function(a){if(!a)return null;a=this._data_.graph.curieParser.parse(a,!0);return(a=this._data_.graph.subjects[a])?a:null};t.prototype.getProjection=function(a,b){if(!a)return null;a=this._data_.graph.curieParser.parse(a,
!0);var c=this._data_.graph.subjects[a];return c?t.toProjection(this,c,b):null};t.prototype.getProjections=function(a,b,c){a&&(a=this._data_.graph.curieParser.parse(a,!0));var d=[];"undefined"==typeof b&&"undefined"==typeof c&&(c=a);if(a&&b){var e=this._data_.graph.curieParser.parse(b,!0),f;for(f in this._data_.graph.subjects){var h=this._data_.graph.subjects[f],l=h.predicates[a];if(l)for(var m=0;m<l.objects.length;m++)if(l.objects[m].value==b||l.objects[m].value==e){d.push(t.toProjection(this,h,
c));break}}}else if(a)for(f in this._data_.graph.subjects)h=this._data_.graph.subjects[f],h.predicates[a]&&d.push(t.toProjection(this,h,c));else for(f in this._data_.graph.subjects)h=this._data_.graph.subjects[f],d.push(t.toProjection(this,h,c));return d};t.prototype.merge=function(a,b){var c=b&&b.mergeBlankNodes?!0:!1,d=0;if(!c)for(var e in this._data_.graph.subjects){var f=/_:([0-9]+)/.exec(e);f&&(f=parseInt(f[1]),f>d&&(d=f))}if(a){var h={},c=c?function(a){return a}:function(a){var b=h[a];!b&&/_:([0-9]+)/.test(a)&&
(d++,b="_:"+d,h[a]=b);return b?b:a},f="undefined"!=typeof a.subjects?a.subjects:a;for(e in f){var l=c(e),m=f[e];e=l?l:e;if(l=this._data_.graph.subjects[e])for(var g in m.predicates){var q=m.predicates[g],p=l.predicates[g];if(p)for(var r=0;r<q.objects.length;r++){for(var x=q.objects[r],t=[],y=0;y<p.objects.length;y++)x.type!=n.XMLLiteralURI&&x.type!=n.HTMLLiteralURI||p.objects[y].type==x.type&&p.objects[y].value===x.value?p.objects[y].type==x.type&&p.objects[y].value!=x.value||t.push(x):t.push(x);
for(y=0;y<t.length;y++){x=null;for(r=0;!x&&r<p.objects.length;r++)p.objects[r].value==t[y].value&&p.objects[r].type==t[y].type&&(x=p.objects[r]);x||(t[y].type==n.objectURI&&(t[y].value=c(t[y].value)),p.objects.push(t[y]))}}else for(l.predicates[g]=q,r=0;r<q.objects.length;r++)q.objects[r].type==n.objectURI&&(q.objects[r].value=c(q.objects[r].value))}else for(g in this._data_.graph.subjects[e]=m,m.subject=e,m.predicates)for(q=m.predicates[g],r=0;r<q.objects.length;r++)q.objects[r].type==n.objectURI&&
(q.objects[r].value=c(q.objects[r].value))}}if(b&&b.prefixes)for(var w in b.prefixes)this._data_.graph.prefixes[w]||(this._data_.graph.prefixes[w]=b.prefixes[w])};Element.prototype.getElementsByType=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(this.ownerDocument.data.graph.curieParser.parse(arguments[b],!1));var b=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(b){if(!b.data)return NodeFilter.FILTER_SKIP;for(var c=0;c<a.length;c++)if(0<=b.data.types.indexOf(a[c]))return b.getAttributeNode("typeof")?
NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_SKIP}},!1),c=[];for(c.item=function(a){return this[a]};b.nextNode();)c.push(b.currentNode);return c};Element.prototype.getFirstElementByType=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(this.ownerDocument.data.graph.curieParser.parse(arguments[b],!1));b=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(b){if(!b.data)return NodeFilter.FILTER_SKIP;for(var d=0;d<a.length;d++)if(0<=
b.data.types.indexOf(a[d]))return b.getAttributeNode("typeof")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_SKIP}},!1);return b.nextNode()?b.currentNode:null};t.attach=function(a,b){Object.defineProperty(a,"data",{value:new t(b&&b.baseURI?b.baseURI:a.nodeType==Node.DOCUMENT_NODE?a.documentElement.baseURI:a.graph.baseURI),writable:!1,configurable:!1,enumerable:!0});a.getElementsByType=function(a){return this.getElementsByProperty("http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
a)};a.getElementsBySubject=function(a){var b=[];b.item=function(a){return this[a]};a=this.data._data_.graph.curieParser.parse(a,!0);if(a=this.data._data_.graph.subjects[a])for(var e=0;e<a.origins.length;e++)b.push(a.origins[e]);return b};a.getElementsByProperty=function(a,b){var e=[];e.item=function(a){return this[a]};b&&(b=this.data._data_.graph.curieParser.parse(b,!1));var f="undefined"==typeof b;a=this.data._data_.graph.curieParser.parse(a,!0);for(var h in this.data._data_.graph.subjects){var l=
this.data._data_.graph.subjects[h].predicates[a];if(l)for(var m=0;m<l.objects.length;m++)if(f||l.objects[m].value==b)Array.isArray(l.objects[m].origin)?e.push.apply(e,l.objects[m].origin):e.push(l.objects[m].origin)}return e};a.getElementSubject=function(a){for(var b in this.data._data_.graph.subjects)if(0<=this.data._data_.graph.subjects[b].origins.indexOf(a))return b;return null}};g.prototype=new C;g.prototype.constructor=g;g.commentRE=/^#.*/;g.wsRE=/^\s+/;g.iriRE=/^\<((?:(?:[^\x00-\x20<>"{}|^`\\]|\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]|\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])*))\>/;
g.singleQuoteLiteralRE=/^'((?:[^'\n\r\\]*|\\'|\\)*)'/;g.doubleQuoteLiteralRE=/^\"((?:[^"\n\r\\]*|\\"|\\)*)\"/;g.longDoubleQuoteLiteralRE=/^\"\"\"((?:[^"\\]*|\\"|\\|\"(?!\")|\"\"(?!\"))*)\"\"\"/;g.longSingleQuoteLiteralRE=/^'''((?:[^'\\]*|\\'|\\|'(?!')|''(?!'))*)'''/;g.typeRE=/^\^\^/;g.dotRE=/^\./;g.openSquareBracketRE=/^\[/;g.closeSquareBracketRE=/^\]/;g.prefixRE=/^((?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\.\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040]))?)?):/;
g.blankNodeRE=/^(_:)/;g.localNameRE=/^((?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_:]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=\/?#@%])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\.:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%]))?)/;
g.langRE=/^@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)/;g.prefixIDRE=/^@prefix/;g.baseRE=/^@base/;g.sparqlPrefixRE=/^[Pp][Rr][Ee][Ff][Ii][Xx]/;g.sparqlBaseRE=/^[Bb][Aa][Ss][Ee]/;g.semicolonRE=/^;/;g.commaRE=/^,/;g.aRE=/^a/;g.openParenRE=/^\(/;g.closeParenRE=/^\)/;g.integerRE=/^([+-]?[0-9]+)/;g.decimalRE=/^([+-]?[0-9]*\.[0-9]+)/;g.doubleRE=/^([+-]?(?:[0-9]+\.[0-9]*[eE][+-]?[0-9]+|\.[0-9]+[eE][+-]?[0-9]+|[0-9]+[eE][+-]?[0-9]+))/;g.booleanRE=/^(true|false)/;g.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";
g.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";g.plainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";g.nilURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil";g.firstURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#first";g.restURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest";g.xsdStringURI="http://www.w3.org/2001/XMLSchema#string";g.xsdIntegerURI="http://www.w3.org/2001/XMLSchema#integer";g.xsdDecimalURI="http://www.w3.org/2001/XMLSchema#decimal";g.xsdDoubleURI=
"http://www.w3.org/2001/XMLSchema#double";g.xsdBooleanURI="http://www.w3.org/2001/XMLSchema#boolean";g.prototype.reset=function(){this.context=new H;this.errorCount=0;this.lineNumber=1};g.dumpGraph=function(a){for(var b in a)console.log(a[b].toString())};g.prototype._match=function(a,b){var c=a.exec(b);return c?{text:c[0],remaining:b.substring(c[0].length),values:1<c.length?c.splice(1):null}:null};g.prototype._trim=function(a){var b=null;do{if(b=g.wsRE.exec(a))this.lineNumber+=b[0].split(/\n/).length-
1,a=a.substring(b[0].length);(b=g.commentRE.exec(a))&&(a=a.substring(b[0].length))}while(b);return a};g.prototype.reportError=function(a){this.onError(this.lineNumber,a)};g.prototype.parse=function(a,b){b&&(this.context.baseURI=this.parseURI(b));for(;0<a.length;)a=this._trim(a),0<a.length&&(a=this.parseStatement(a))};g.prototype.parseStatement=function(a){var b=this._match(g.prefixIDRE,a);if(b){var c=this._trim(b.remaining),b=this.parsePrefixName(c);if(!b)return this.reportError("Cannot parse prefix after @prefix: "+
a.substring(20)+"..."),this.errorCount++,c;a=b.prefix;c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after @prefix: "+c.substring(20)+"..."),this.errorCount++,c;this.context.prefixes[a]=this.context.baseURI?this.context.baseURI.resolve(b.iri):b.iri;try{this.parseURI(this.context.prefixes[a])}catch(d){this.reportError(d.toString()),this.errorCount++}c=this._trim(b.remaining);if(b=this._match(g.dotRE,c))return b.remaining;this.reportError("Missing end . for @prefix statement.  Found: "+
c.substring(0,20)+"...");this.errorCount++;return c}if(b=this._match(g.baseRE,a)){c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after @base: "+c.substring(0,20)+"..."),this.errorCount++,c;try{this.context.baseURI=this.context.baseURI?this.parseURI(this.context.baseURI.resolve(b.iri)):this.parseURI(b.iri)}catch(e){this.reportError(e+"; IRI: "+b.iri),this.errorCount++}c=this._trim(b.remaining);if(b=this._match(g.dotRE,c))return b.remaining;this.reportError("Missing end . for @base statement.  Found: "+
c.substring(0,20)+"...");this.errorCount++;return c}if(b=this._match(g.sparqlPrefixRE,a)){c=this._trim(b.remaining);b=this.parsePrefixName(c);if(!b)return this.reportError("Cannot parse prefix after PREFIX: "+a.substring(0,20)+"..."),this.errorCount++,c;a=b.prefix;c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after PREFIX: "+c.substring(0,20)+"..."),this.errorCount++,c;this.context.prefixes[a]=this.context.baseURI?this.context.baseURI.resolve(b.iri):
b.iri;try{this.parseURI(this.context.prefixes[a])}catch(f){this.reportError(f.toString()),this.errorCount++}return b.remaining}if(b=this._match(g.sparqlBaseRE,a)){c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after BASE: "+c.substring(0,20)+"..."),this.errorCount++,c;try{this.context.baseURI=this.context.baseURI?this.parseURI(this.context.baseURI.resolve(b.iri)):this.parseURI(b.iri)}catch(h){this.reportError(h+"; IRI: "+b.iri),this.errorCount++}return b.remaining}a=
this.parseTriples(a);a=this._trim(a);if(b=this._match(g.dotRE,a))return b.remaining;this.reportError("Missing end . triples.  Found: "+a.substring(0,20)+"...");this.errorCount++;return a};g.prototype.parseTriples=function(a){var b=this.parseIRI(a);if(b||(b=this.parseBlankNode(a)))return this.parsePredicateObjectList(b.iri,this._trim(b.remaining));if(b=this._match(g.openParenRE,a)){a=null;var c=b.remaining,d=null;do{c=this._trim(c);if(b=this._match(g.closeParenRE,c)){c=b.remaining;d?this.addTriple(d,
g.restURI,{type:g.objectURI,value:g.nilURI}):a=this.context.newBlankNode();break}b=this.context.newBlankNode();d?this.addTriple(d,g.restURI,{type:g.objectURI,value:b}):a=b;d=b;c=this.parseObject(d,g.firstURI,c)}while(0<c.length);return this.parsePredicateObjectList(a,this._trim(c))}return(b=this._match(g.openSquareBracketRE,a))?(a=this.context.newBlankNode(),c=this._trim(b.remaining),(b=this._match(g.closeSquareBracketRE,c))?c=b.remaining:(c=this.parsePredicateObjectList(a,c),(b=this._match(g.closeSquareBracketRE,
this._trim(c)))?c=b.remaining:this.reportError("Missing end square bracket ']'.")),this.parsePredicateObjectList(a,this._trim(c),!0)):b?this.parsePredicateObjectList(b.iri,this._trim(b.remaining)):(this.reportError("Terminating: Cannot parse at "+a.substring(0,20)+" ..."),this.errorCount++,"")};g.prototype.parsePredicateObjectList=function(a,b,c){var d=!0,e=null;do{var f=this.parseIRI(b);!f&&(f=this._match(g.aRE,b))&&(f.iri=g.typeURI);if(!f){if(c)return b;this.reportError("Terminating: Cannot parse predicate IRI.");
this.errorCount++;return""}e=this.parseObjectList(a,f.iri,this._trim(f.remaining));if(f=this._match(g.semicolonRE,this._trim(e))){do b=this._trim(f.remaining),f=this._match(g.semicolonRE,b);while(f);c=!0}else d=!1}while(d);return e};g.prototype.parseObjectList=function(a,b,c){var d=!0,e=null;do{var e=this.parseObject(a,b,c),f=this._match(g.commaRE,this._trim(e));f?c=this._trim(f.remaining):d=!1}while(d);return e};g.prototype.parseObject=function(a,b,c){var d=this.parseIRI(c);if(d||(d=this.parseBlankNode(c)))return this.addTriple(a,
b,{type:g.objectURI,value:d.iri}),d.remaining;if(d=this._match(g.openParenRE,c)){var e=a,f=b,h=d.remaining;do{h=this._trim(h);if(d=this._match(g.closeParenRE,h))return this.addTriple(e,e==a?b:g.restURI,{type:g.objectURI,value:g.nilURI}),d.remaining;d=this.context.newBlankNode();e==a?this.addTriple(a,b,{type:g.objectURI,value:d}):this.addTriple(e,g.restURI,{type:g.objectURI,value:d});e=d;f=g.firstURI;h=this.parseObject(e,f,h)}while(0<h.length)}if(d=this._match(g.openSquareBracketRE,c)){c=this.context.newBlankNode();
this.addTriple(a,b,{type:g.objectURI,value:c});h=this.parsePredicateObjectList(c,this._trim(d.remaining),!0);h=this._trim(h);if(d=this._match(g.closeSquareBracketRE,h))return d.remaining;this.reportError("Missing close square bracket ']' for blank node "+c+" predicate object list");this.errorCount++;return h}if(d=this.parseLiteral(c))return h=d.literal,"http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"==d.type?(h="<root>"+d.literal+"</root>",c=new DOMParser,h=c.parseFromString(h,"application/xml"),
h=h.documentElement.childNodes):"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML"==d.type&&(h="<html><head/><body>"+d.literal+"</body></html>",c=new DOMParser,h=c.parseFromString(h,"text/html"),h=h.body.childNodes),this.addTriple(a,b,{type:d.type?d.type:g.plainLiteralURI,value:h,language:d.language}),d.remaining;this.reportError("Terminating: Cannot parse literal at "+c.substring(0,20));this.errorCount++;return""};g.prototype.parsePrefixName=function(a){if(a=this._match(g.prefixRE,a))a.prefix=a.values[0];
return a};g.prototype.parseIRIReference=function(a){if(a=this._match(g.iriRE,a))a.iri=g.expandURI(a.values[0]);return a};g.prototype.parseIRI=function(a){var b=this._match(g.iriRE,a);if(b){a=g.expandURI(b.values[0]);b.iri=this.context.baseURI?this.context.baseURI.resolve(a):a;try{this.parseURI(b.iri)}catch(c){this.reportError(c.toString()),this.errorCount++}return b}if(b=this._match(g.prefixRE,a)){var d=b.values[0];a=this.context.prefixes[d];if(!a)return this.reportError("No prefix mapping for "+
d),this.errorCount++,null;d=b.remaining;if(b=this._match(g.localNameRE,d)){b.iri=a+g.expandName(b.values[0]);try{this.parseURI(b.iri)}catch(e){this.reportError(e.toString()),this.errorCount++}return b}return{iri:a,remaining:d}}return null};g.prototype.parseBlankNode=function(a){if(a=this._match(g.blankNodeRE,a))if(a=this._match(g.localNameRE,a.remaining))return a.iri="_:"+g.expandName(a.values[0]),a;return null};g.prototype.parseLiteral=function(a){var b=this._match(g.longDoubleQuoteLiteralRE,a);
b||(b=this._match(g.longSingleQuoteLiteralRE,a));b||(b=this._match(g.singleQuoteLiteralRE,a));b||(b=this._match(g.doubleQuoteLiteralRE,a));if(b){a=null;try{a=g.expandLiteral(b.values[0])}catch(c){this.reportError(c.toString()),this.errorCount++}var d=b.remaining;if(b=this._match(g.langRE,d))return b.literal=a,b.language=b.values[0],b;if(b=this._match(g.typeRE,d)){d=b.remaining;if(b=this.parseIRI(d))return b.literal=a,b.type=b.iri,b;this.reportError("Missing type URI after ^^");this.errorCount++}return{literal:a,
remaining:d}}return(b=this._match(g.doubleRE,a))?(b.literal=b.values[0],b.type=g.xsdDoubleURI,b):(b=this._match(g.decimalRE,a))?(b.literal=b.values[0],b.type=g.xsdDecimalURI,b):(b=this._match(g.integerRE,a))?(b.literal=b.values[0],b.type=g.xsdIntegerURI,b):(b=this._match(g.booleanRE,a))?(b.literal=b.values[0],b.type=g.xsdBooleanURI,b):null};g.prototype.newSubject=function(a){var b=this.context.subjects[a];b||(b=new F(this.context,a),this.context.subjects[a]=b);return b};g.expandHex=function(a){for(var b=
a.split(/[0-9A-Fa-f]+/),c=0;c<b.length;c++)if(0<b[c].length)throw"Bad hex in escape: "+a;b=parseInt(a,16);if(isNaN(b))throw"Bad hex in escape: "+a;if(65536>b)return String.fromCharCode(b);a=b-65536;b=a&1023;return String.fromCharCode((a>>10)+55296)+String.fromCharCode(b+56320)};g.escapedSequenceRE=/(\\t|\\b|\\n|\\r|\\f|\\"|\\'|\\\\|(?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/;g.expandLiteral=function(a){a=
a.split(g.escapedSequenceRE);for(var b="",c=0;c<a.length;c++)if(0!=a[c].length)if("\\t"==a[c])b+="\t";else if("\\b"==a[c])b+="\b";else if("\\n"==a[c])b+="\n";else if("\\r"==a[c])b+="\r";else if("\\f"==a[c])b+="\f";else if('\\"'==a[c])b+='"';else if("\\'"==a[c])b+="'";else if("\\\\"==a[c])b+="\\";else if(6==a[c].length&&"\\"==a[c].charAt(0)&&"u"==a[c].charAt(1))b+=g.expandHex(a[c].substring(2));else if(10==a[c].length&&"\\"==a[c].charAt(0)&&"U"==a[c].charAt(1))b+=g.expandHex(a[c].substring(2));else{var d=
a[c].substring(0,2);if(2==d.length&&"\\U"==d)throw"Bad hex in \\U escape "+a[c].substring(0,10);if(2==d.length&&"\\u"==d)throw"Bad hex in \\u escape "+a[c].substring(0,6);d=a[c].indexOf("\\");if(0<=d)throw"Bad escape "+a[c].substring(d,d+2);b+=a[c]}return b};g.escapedURIRE=/((?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/;g.expandURI=function(a){a=a.split(g.escapedURIRE);for(var b="",c=0;c<a.length;c++)if(0!=
a[c].length)if(6==a[c].length&&"\\"==a[c].charAt(0)&&"u"==a[c].charAt(1))b+=g.expandHex(a[c].substring(2));else if(10==a[c].length&&"\\"==a[c].charAt(0)&&"U"==a[c].charAt(1))b+=g.expandHex(a[c].substring(2));else{var d=a[c].substring(0,2);if(2==d.length&&"\\U"==d)throw"Bad hex in \\U escape "+a[c].substring(0,10);if(2==d.length&&"\\u"==d)throw"Bad hex in \\u escape "+a[c].substring(0,6);d=a[c].indexOf("\\");if(0<=d)throw"Bad escape "+a[c].substring(d,d+2);b+=a[c]}return b};g.escapedNameCharRE=/(\\[_~\.\-!$&'()*+,;=/?#@%])/;
g.expandName=function(a){a=a.split(g.escapedNameCharRE);for(var b="",c=0;c<a.length;c++)0!=a[c].length&&(b="\\"==a[c].charAt(0)?b+a[c].charAt(1):b+a[c]);return b};g.prototype.addTriple=function(a,b,c){a=this.newSubject(a);var d=a.predicates[b];d||(d=new G(b),a.predicates[b]=d);d.objects.push(c);b==g.typeURI&&a.types.push(c.value)};p.prototype=new C;p.prototype.constructor=p;p.absoluteURIRE=/[\w\_\-]+:\S+/;p.prototype.newBlankNode=function(){this.blankCounter++;return"_:"+this.blankCounter};p.prototype.createBaseURI=
function(a){var b=a.indexOf("#");0<=b&&(a=a.substring(0,b));return this.parseURI(a)};p.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};p.tokenize=function(a){return p.trim(a).split(/\s+/)};p.prototype.getVocabulary=function(a){for(var b=0;b<this.vocabularies.length;b++)if(this.vocabularies[b].isMember(a))return this.vocabularies[b];var b=function(a){return{namespaceURI:a,getProperty:function(a){return this.namespaceURI+a}}},c=a.indexOf("#");if(0<=c)return b(a.substring(0,c+1));
c=a.lastIndexOf("/");return 0<=c?b(a.substring(0,c+1)):b(a)};p.prototype.getProperty=function(a,b){return p.absoluteURIRE.exec(a)?a:b?b.getProperty(a):null};p.valueMappings={meta:function(a,b){return a.getAttribute("content")},audio:function(a,b){return b.resolve(a.getAttribute("src"))},a:function(a,b){return b.resolve(a.getAttribute("href"))},object:function(a,b){return b.resolve(a.getAttribute("data"))},time:function(a,b){var c=a.getAttribute("datetime");return c?c:a.textContent}};p.valueMappings.embed=
p.valueMappings.audio;p.valueMappings.iframe=p.valueMappings.audio;p.valueMappings.img=p.valueMappings.audio;p.valueMappings.source=p.valueMappings.audio;p.valueMappings.track=p.valueMappings.audio;p.valueMappings.video=p.valueMappings.audio;p.valueMappings.area=p.valueMappings.a;p.valueMappings.link=p.valueMappings.a;p.prototype.getValue=function(a,b){var c=p.valueMappings[a.localName];return c?c(a,b):a.textContent};p.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";p.PlainLiteralURI=
"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";p.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";p.prototype.process=function(a){a.nodeType==Node.DOCUMENT_NODE&&(a=a.documentElement);var b=[];for(b.push({current:a,context:this.push(null,null)});0<b.length;){var c=b.shift();a=c.current;var c=c.context,d=this.createBaseURI(a.baseURI),e=null,f=c.vocabulary,h=a.hasAttribute("itemscope");if(h){var l=a.getAttribute("itemtype"),m=a.getAttribute("itemid");l&&(f=this.getVocabulary(l),
e=m?m:this.newBlankNode(),this.newSubjectOrigin(a,e),this.addTriple(a,e,p.typeURI,{type:p.objectURI,value:l}))}if(l=a.getAttribute("itemprop"))if(l=p.tokenize(l),h)c.parent.subject&&e&&this.addTriple(a,c.subject,g,{type:p.objectURI,value:e});else if(f&&(e||(e=c.subject),e))for(d=this.getValue(a,d),h=0;h<l.length;h++){var g=0<l[h].length?this.getProperty(l[h],f):null;g&&this.addTriple(a,e,g,{type:p.PlainLiteralURI,value:d})}for(a=a.lastChild;a;a=a.previousSibling)a.nodeType==Node.ELEMENT_NODE&&b.unshift({current:a,
context:this.push(c,e,f)})}};p.prototype.push=function(a,b,c){return{parent:a,subject:b?b:a?a.subject:null,vocabulary:c?c:a?a.vocabulary:null}};p.prototype.newSubjectOrigin=function(a,b){};p.prototype.addTriple=function(a,b,c,d){};M.prototype=new p;M.prototype.constructor=p;M.prototype.newBlankNode=function(){return this.graph.newBlankNode()};M.prototype.newSubjectOrigin=function(a,b){var c=this.graph.subjects[b];c||(c=new F(this.graph,b),this.graph.subjects[b]=c);a.data||Object.defineProperty(a,
"data",{value:c,writable:!1,configurable:!0,enumerable:!0})};M.prototype.addTriple=function(a,b,c,d){var e=this.graph.subjects[b];e||(e=new F(this.graph,b),this.graph.subjects[b]=e);b=e.predicates[c];b||(b=new G(c),e.predicates[c]=b);for(var f=0;f<b.objects.length;f++)if(b.objects[f].type==d.type&&b.objects[f].value==d.value){b.objects[f].origin!==a&&(Array.isArray(b.objects[f].origin)||(c=[],c.push(b.objects[f].origin),b.objects[f].origin=c),b.objects[f].origin.push(a));return}b.objects.push(d);
d.origin=a;c==p.typeURI&&e.types.push(d.value)};w.prototype=new C;w.prototype.constructor=w;w.absoluteURIRE=/[\w\_\-]+:\S+/;w.prototype.newBlankNode=function(){this.blankCounter++;return"_:"+this.blankCounter};w.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};w.builtinContexts={"http://schema.org/":{"@vocab":"http://schema.org/",acceptsReservations:{"@type":"@id"},additionalType:{"@type":"@id"},applicationCategory:{"@type":"@id"},applicationSubCategory:{"@type":"@id"},arrivalTime:{"@type":"DateTime"},
availabilityEnds:{"@type":"DateTime"},availabilityStarts:{"@type":"DateTime"},availableFrom:{"@type":"DateTime"},availableThrough:{"@type":"DateTime"},birthDate:{"@type":"Date"},bookingTime:{"@type":"DateTime"},checkinTime:{"@type":"DateTime"},checkoutTime:{"@type":"DateTime"},codeRepository:{"@type":"@id"},commentTime:{"@type":"Date"},contentUrl:{"@type":"@id"},dateCreated:{"@type":"Date"},dateIssued:{"@type":"DateTime"},dateModified:{"@type":"Date"},datePosted:{"@type":"Date"},datePublished:{"@type":"Date"},
deathDate:{"@type":"Date"},departureTime:{"@type":"DateTime"},discussionUrl:{"@type":"@id"},dissolutionDate:{"@type":"Date"},doorTime:{"@type":"DateTime"},downloadUrl:{"@type":"@id"},dropoffTime:{"@type":"DateTime"},embedUrl:{"@type":"@id"},endDate:{"@type":"Date"},endTime:{"@type":"DateTime"},expectedArrivalFrom:{"@type":"DateTime"},expectedArrivalUntil:{"@type":"DateTime"},expires:{"@type":"Date"},featureList:{"@type":"@id"},foundingDate:{"@type":"Date"},gameLocation:{"@type":"@id"},gamePlatform:{"@type":"@id"},
guidelineDate:{"@type":"Date"},hasMap:{"@type":"@id"},image:{"@type":"@id"},installUrl:{"@type":"@id"},isBasedOnUrl:{"@type":"@id"},labelDetails:{"@type":"@id"},lastReviewed:{"@type":"Date"},license:{"@type":"@id"},logo:{"@type":"@id"},map:{"@type":"@id"},maps:{"@type":"@id"},memoryRequirements:{"@type":"@id"},menu:{"@type":"@id"},modifiedTime:{"@type":"DateTime"},namedPosition:{"@type":"@id"},orderDate:{"@type":"DateTime"},ownedFrom:{"@type":"DateTime"},ownedThrough:{"@type":"DateTime"},paymentDue:{"@type":"DateTime"},
paymentUrl:{"@type":"@id"},pickupTime:{"@type":"DateTime"},prescribingInfo:{"@type":"@id"},previousStartDate:{"@type":"Date"},priceValidUntil:{"@type":"Date"},publishingPrinciples:{"@type":"@id"},relatedLink:{"@type":"@id"},releaseDate:{"@type":"Date"},releaseNotes:{"@type":"@id"},replyToUrl:{"@type":"@id"},requirements:{"@type":"@id"},roleName:{"@type":"@id"},sameAs:{"@type":"@id"},scheduledTime:{"@type":"DateTime"},screenshot:{"@type":"@id"},serviceUrl:{"@type":"@id"},significantLink:{"@type":"@id"},
significantLinks:{"@type":"@id"},sport:{"@type":"@id"},startDate:{"@type":"Date"},startTime:{"@type":"DateTime"},storageRequirements:{"@type":"@id"},targetUrl:{"@type":"@id"},temporal:{"@type":"DateTime"},thumbnailUrl:{"@type":"@id"},ticketToken:{"@type":"@id"},trackingUrl:{"@type":"@id"},uploadDate:{"@type":"Date"},url:{"@type":"@id"},validFrom:{"@type":"DateTime"},validThrough:{"@type":"DateTime"},validUntil:{"@type":"Date"},warning:{"@type":"@id"},webCheckinTime:{"@type":"DateTime"}}};w.prototype.process=
function(a,b){"string"===typeof a&&(a=JSON.parse(a));var c=[];c.push({current:a,context:null==b||null==b.context?this.emptyContext():"string"==typeof b.context?this.fetchContext(b.context):this.copyContext(b.context)});null!=b&&null!=b.baseURI&&(c[0].context.baseURI=this.parseURI(b.baseURI));null!=b&&null!=b.vocabulary&&(c[0].context.vocabulary=vocabulary);for(var d=null==b?null:b.origin,e=this;0<c.length;){var f=c.shift(),h=f.context,l=null,g;for(g in f.current)if("@"==g[0])if("@context"==g)var p=
f.current[g],h="string"==typeof p?this.fetchContext(p,h):this.makeContext(p,h);else"@id"==g?l=this.resolveURI(f.current[g],h):"@type"==g&&(p=this.expand(f.current[g],h),null==l&&(l=this.newBlankNode()),this.addTriple(d,l,n.typeURI,{type:n.objectURI,value:p}));else null==l&&(l=this.newBlankNode()),predicate=this.expand(g,h),p=f.current[g],"string"==typeof p||"number"==typeof p?this.addTriple(d,l,predicate,{type:n.PlainLiteralURI,value:p}):c.push({current:p,context:h,update:function(a,b){return function(c){e.addTriple(d,
a,b,{type:n.objectURI,value:c})}}(l,predicate)});f.update&&f.update(l)}};w.prototype.expand=function(a,b){a=w.trim(a);var c=this.expandCompactURI(a,b);if(c)return c;if(c=b.terms[a])return c.uri;c=a.toLowerCase();return(c=b.terms[c])?c.uri:b.vocabulary&&!w.absoluteURIRE.exec(a)?b.vocabulary+a:this.resolveURI(a,b)};w.prototype.expandCompactURI=function(a,b){var c=a.indexOf(":");if(0<=c){var d=a.substring(0,c);if("_"==d)return"_:"+a.substring(c+1);if(n.NCNAME.test(d)&&(d=b.terms[d]))return d.uri+a.substring(c+
1)}return null};w.prototype.resolveURI=function(a,b){for(;null!=b&&null==b.baseURI;)b=b.parent;var c=null;b&&b.baseURI?(c=b.baseURI.resolve(a),c=this.parseURI(c)):c=this.parseURI(a);c.normalize();return c.spec};w.prototype.emptyContext=function(){return{parent:null,terms:{}}};w.prototype.fetchContext=function(a,b){var c=w.builtinContexts[a];if(null==c)throw"Non-builtin context references are not supported: "+a;return this.makeContext(c,b)};w.prototype.copyContext=function(a){var b=this.emptyContext();
b.parent=a.parent;b.language=a.language;b.vocabulary=a.vocabulary;b.baseURI=a.baseURI;for(k in a.terms)b.terms[k]=a.terms[k];return b};w.prototype.makeContext=function(a,b){var c=this.emptyContext();Array.isArray(a)||(a=[a]);c.baseURI=b.baseURI;for(var d=0;d<a.length;d++)for(var e=Object.keys(a[d]),f=0;f<e.length;f++){var h=e[f];if("@"==h[0])"@lanaguge"==h?c.language=a[d]["@language"]:"@vocab"==h?c.vocabulary=b.baseURI?b.baseURI.resolve(a[d]["@vocab"]):this.parseURI(a[d]["@vocab"]).spec:"@base"==
h?(h=a[d]["@base"],null!==h&&(c.baseURI=b.baseURI?b.baseURI.resolve(h):this.parseURI(h))):console.log("Ignoring unrecognized context directive "+h);else{var g=a[d][h];if("string"==typeof g)console.log("String values are not supported at this time: "+h+" \u2192 "+JSON.stringify(g)),c.terms[h]={uri:g};else{var m={uri:c.vocabulary+h},g=g["@type"];"@id"==g?m.type=n.objectURI:g&&(m.type=c.vocabulary+g);c.terms[h]=m}}}return c};w.prototype.addTriple=function(a,b,c,d){};R.prototype=new w;R.prototype.constructor=
w;R.prototype.newBlankNode=function(){return this.graph.newBlankNode()};R.prototype.addTriple=function(a,b,c,d){var e=this.graph.subjects[b];e||(e=new F(this.graph,b),this.graph.subjects[b]=e);b=e.predicates[c];b||(b=new G(c),e.predicates[c]=b);for(var f=0;f<b.objects.length;f++)if(b.objects[f].type==d.type&&b.objects[f].value==d.value){b.objects[f].origin!==a&&(Array.isArray(b.objects[f].origin)||(c=[],c.push(b.objects[f].origin),b.objects[f].origin=c),b.objects[f].origin.push(a));return}b.objects.push(d);
d.origin=a;c==n.typeURI&&e.types.push(d.value)};var E={attach:function(a,b){var c=a.implementation.hasFeature;a.implementation.hasFeature=function(a,b){return"RDFaAPI"==a&&"1.1"==b?!0:c.apply(this,arguments)};var d=a.data?!0:!1;if(a.data)a.data._data_&&a.data._data_.graph.clear();else{t.attach(a,b);var e=function(a){a.id||(a.id="R"+Date.now());return new CustomEvent("green-turtle-response",{detail:a})};window.addEventListener("green-turtle-request",function(b){if("status"==b.detail.type)b={type:"status",
version:GreenTurtle.version,loaded:d,count:a.data.graph.tripleCount,id:b.detail.id},window.dispatchEvent(e(b));else if("get-subjects"==b.detail.type){var c=a.data.getSubjects();b={type:"subjects",subjects:c,id:b.detail.id};window.dispatchEvent(e(b))}else if("get-subject"==b.detail.type){var f=null,g=b.detail.subject;if(a.data.getSubject)f=(c=a.data.getSubject(g))?c.toObject():null;else for(var f={subject:g,predicates:{}},n=a.data.getProjection(g),p=n.getProperties(),r=0;r<p.length;r++){var t=[];f.predicates[p[r]]=
{predicate:predicate,objects:t};for(var w=n.getAll(p[r]),y=0;y<w.length;y++)c[w[y]]?t.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",value:w[y]}):t.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",value:w[y]})}b={type:"subject",subject:g,triples:f,id:b.detail.id};window.dispatchEvent(e(b))}else console.log("Unrecognized message: "+JSON.stringify(b.detail))},!1)}var f=function(){var c=new A(a.data._data_);c.finishedHandlers.push(function(c){for(var d in E.processors)E.processors[d].process(a,
b)});c.finishedHandlers.push(function(a){if(a.ownerDocument){var b=a.ownerDocument.createEvent("HTMLEvents");b.initEvent("rdfa.loaded",!0,!0);a.ownerDocument.dispatchEvent(b)}});c.process(a.documentElement,b);d=!0};"loading"==a.readyState?window.addEventListener("load",function(){f()},!1):f()},parse:function(a,b,c){var d=this.processors[b];if(!d)throw"Unsupported media type "+b;d=d.createParser();c&&c.errorHandler&&(d.onError=c.errorHandler);c=c?c.baseURI:null;d.parse(a,c);if(0<d.errorCount)throw c?
"Errors during parsing "+c+" of type "+b:"Errors during parsing of type "+b;return d.context},createDocumentData:function(a){return new t(a?a:window?window.location.href:"about:blank")}};Object.defineProperty(E,"processors",{value:{},writable:!1,configurable:!1,enumerable:!0});E.processors["application/ld+json"]={createParser:function(){return{context:new H,parse:function(a,b){(new R(this.context)).process(a,b)},errorCount:0}},process:function(a,b){if(this.enabled){var c=a.nodeType==Node.DOCUMENT_NODE?
a:a.ownerDocument;if(c.data){for(var d=!0,e=c.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","script"),f=0;f<e.length;f++){var g=e[f].getAttribute("type");if("application/ld+json"==g||"text/json-ld"==g)e[f].src?this.requestRemote(e[f].src,c,b):(g=this.createParser(),b&&b.errorHandler&&(g.onError=b.errorHandler),g.parse(e[f].textContent,this.copyOptions(b,e[f].baseURI)),0<g.errorCount?d=!1:c.data.merge(g.context.subjects,{prefixes:g.context.prefixes}))}return d}}},copyOptions:function(a,b){var c=
{};for(key in a)c[key]=a[key];b&&(c.baseURI=b);return c},requestRemote:function(a,b,c){var d=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){var f=d.createParser();c&&c.errorHandler&&(f.onError=c.errorHandler);f.parse(e.responseText,d.copyOptions(c,a));if(0==f.errorCount){b.data.merge(f.context.subjects,{prefixes:f.context.prefixes});for(var g in f.context.subjects){var l=b.createEvent("CustomEvent");l.initCustomEvent("rdfa.updated",!0,!0,{id:g,types:f.context.subjects[g].types});
b.dispatchEvent(l)}}}};e.open("GET",a,!0);e.send()},enabled:!0};E.processors["text/turtle"]={createParser:function(){return new g},process:function(a,b){if(this.enabled){var c=a.nodeType==Node.DOCUMENT_NODE?a:a.ownerDocument;if(c.data){for(var d=!0,e=c.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","script"),f=0;f<e.length;f++)if("text/turtle"==e[f].getAttribute("type")){var g=this.createParser();b&&b.errorHandler&&(g.onError=b.errorHandler);g.parse(e[f].textContent,b?b.baseURI:null);0<g.errorCount?
d=!1:c.data.merge(g.context.subjects,{prefixes:g.context.prefixes})}return d}}},enabled:!0};E.processors.microdata={process:function(a,b){if(this.enabled){var c=a.nodeType==Node.DOCUMENT_NODE?a:a.ownerDocument;if(!c.data)return!1;(new M(c.data.graph)).process(a);return!0}},enabled:!1};Object.defineProperty(S,"implementation",{value:E,writable:!1,configurable:!1,enumerable:!0});S.attach=function(a,b){E.attach(a,b)};return S}();GreenTurtle.attach(document);
